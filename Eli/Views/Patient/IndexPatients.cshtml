@model IEnumerable<Eli.ViewModel.Family>
@using Eli.Models;
@using Eli.ViewModel;
@using System;
@using System.Collections.Generic;

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title></title>
    <meta name="viewport" content="width=device-width" />
    <script src="~/Scripts/DataTable/dataTables.keyTable.js"></script>
    <script src="~/Scripts/DataTable/jquery.js"></script>

    <script src="~/Scripts/DataTable/jquery.dataTables.js"></script>
    <link href="~/Scripts/DataTable/dataTables.keyTable.css" rel="stylesheet" />
    <link href="~/Scripts/DataTable/jquery.dataTables.css" rel="stylesheet" />
    <link href="~/Scripts/FontHebrew.css" rel="stylesheet" />
    <meta charset="utf-8">
    <link href='http://serve.fontsproject.com/css?family=Nehama:400'
          rel='stylesheet' type='text/css'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    @Styles.Render("~/Content/bootstrapcss")
    @Styles.Render("~/Content/themes/base/css")

</head>
<body >
    <h5 align="center" style="color:blue">מטופלים</h5>
    <h4 align="right">:חיפוש</h4>
    <div dir="rtl">
        <table id="myTable" class="display nowrap table-bordered" >
            <thead align="center">
                <tr>
                    <th style="text-align: center;">תעודת זהות</th>
                    <th style="text-align: center;">שם פרטי</th>
                    <th style="text-align: center;">שם משפחה</th>
                    <th style="text-align: center;">טלפון</th>
                    <th style="text-align: center;">פרטים נוספים</th>
                    <th style="text-align: center;">משפחה</th>
                    <th style="text-align: center;">הפניות</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr align="center">
                        <td> @item.Patient.ID </td>
                        <td> @item.Patient.FirstName </td>
                        <td> @item.Patient.SurName </td>
                        <td> @item.Patient.PhoneNumber </td>
                        <td>
                            <a data-toggle="modal" data-target="#@item.Patient.ID">
                                <img src="~/Images/Information_32x32.png" />
                            </a>
                        </td>
                        <td>
                            @{
                                 String id = "1" + @item.Patient.ID;
                            }
                            <a data-toggle="modal" data-target="#@id">
                                <img src="~/Images/Family-32.png" />
                            </a>
                        </td>

                        <td>
                            <a href="@Url.Action("IndexReference", "Reference", new { pid = @item.Patient.ID }, null)">
                                <img src="~/Images/References-32.png" />
                            </a>
                        </td>
                    </tr>
                    
                }
            </tbody>
        </table>
    </div>

    @foreach (Family item in Model)
    {
                @Html.Partial("_PopUpPatient", item.Patient);
    }

    @foreach (Family item in Model)
    {
                @Html.Partial("_EditFamily", item);
    }

    <script>

        var table = $('#myTable').DataTable();
        new $.fn.dataTable.KeyTable(table);

    </script>

</body>
</html>

